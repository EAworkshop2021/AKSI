"use strict";(()=>{const e=/^\+[7]\([0-9]{3}\)[0-9]{0,8}\d*$/,t=/\d/g,l=/\d/,a=document.querySelector("footer #form");if(!a)return;const i=a.querySelector('button[type="submit"]'),s=a.querySelectorAll("input"),u=a.querySelector("#tel"),n=a.querySelector("#name");let o=localStorage.getItem("name"),d=localStorage.getItem("tel");o&&(n.value=o),d&&(u.value=d),u&&(u.addEventListener("focus",(()=>{e.test(u.value)||(u.value="+7(")})),u.addEventListener("keydown",(e=>{let t=0;if(l.test(e.key)){u.setCustomValidity("");let e=u.value.length;if(e<t)return void t--;2===e&&(u.value=u.value+"("),6===e&&(u.value=u.value+")"),e>13&&(u.value=u.value.substring(0,u.value.length-1)),t++}else e.preventDefault(),u.setCustomValidity("Только цифры!");"Backspace"===e.key&&"+7("!==u.value&&(u.value=u.value.substring(0,u.value.length-1),u.setCustomValidity("")),"Tab"===e.key&&(i.focus(),u.setCustomValidity("")),"Enter"===e.key&&(i.click(),u.setCustomValidity("")),u.reportValidity()})),i&&i.addEventListener("click",(()=>{for(let e of s)!1===e.reportValidity()?e.classList.add("input-invalid"):e.classList.remove("input-invalid");0===n.value.length&&n.setCustomValidity("Введите имя!"),"+7("===u.value?(u.setCustomValidity("Вы не ввели номер телефона!"),u.classList.add("input-invalid")):u.value.match(t).length<11?(u.setCustomValidity("Номер должен быть длиной 11 цифр, еще "+(11-u.value.match(t).length)),u.classList.add("input-invalid")):u.value.match(t).length>11?(u.setCustomValidity(`Номер должен быть длиной 11 цифр, введено: ${u.value.match(t).length}`),u.classList.add("input-invalid")):(u.setCustomValidity(""),u.classList.remove("input-invalid")),localStorage.setItem("name",n.value),localStorage.setItem("tel",u.value)})))})();